{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d06e2dccedc85e196eca","webpack:///./src/index.js","webpack:///./src/utils/http.js","webpack:///./src/utils/request.js"],"names":["DataSourceConnector","Handsontable","plugins","BasePlugin","constructor","hotInstance","http","colHeaders","filters","order","isEnabled","enabled","hot","getSettings","dataSourceConnector","controllerUrl","addHook","onDataSend","defaultHeaders","requestHeaders","addListener","args","runHooks","enablePlugin","index","amount","onRemoveCol","onRemoveRow","onAfterInit","changes","source","onAfterChange","column","onAfterColumnSort","onAfterCreateRow","onAfterCreateCol","columns","target","onAfterColumnMove","conditionsStack","onAfterFilter","rows","onRowMove","conditions","getPlugin","conditionCollection","exportAllConditions","forEach","item","uri","post","then","response","_loadData","_move","array","from","to","increment","k","columnNames","i","length","push","colMoved","value","data","payload","sourceIndex","noOfRows","getData","row","setCellMeta","getCellMeta","row_id","name","removedCol","err","col","col_id","id","setDataAtCell","rowsRemoved","rowsMoved","undefined","responseData","normalizedData","columnName","loadData","rowId","get","updateSettings","disablePlugin","updatePlugin","changeItems","cellMeta","oldValue","newValue","meta","instance","destroy","registerPlugin","Http","listeners","callback","listener","url","request","method","body","JSON","stringify","parse","obj","Promise","resolve","reject","xhr","XMLHttpRequest","open","headers","Object","keys","key","setRequestHeader","onload","status","statusText","onerror","send","Request"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DA;;AAEA;;;;;;;AAOA,MAAMA,mBAAN,SAAkCC,aAAaC,OAAb,CAAqBC,UAAvD,CAAkE;;AAEhE;AACAC,cAAYC,WAAZ,EAAyB;AACvB,UAAMA,WAAN;AACA,SAAKC,IAAL,GAAY,EAAZ;AACA,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,KAAL,GAAa,EAAb;AACD;;AAED;;;AAGAC,cAAY;AACV,QAAIC,UAAU,CAAC,CAAC,KAAKC,GAAL,CAASC,WAAT,GAAuBC,mBAAvC;AACA,QAAIH,OAAJ,EAAa;AACX,UAAII,gBAAgB,KAAKH,GAAL,CAASC,WAAT,GAAuBC,mBAAvB,CAA2CC,aAA/D;AACA,WAAKH,GAAL,CAASI,OAAT,CAAiB,YAAjB,EAA+B,KAAKJ,GAAL,CAASC,WAAT,GAAuBC,mBAAvB,CAA2CG,UAA1E;AACA,WAAKX,IAAL,GAAY,IAAI,4DAAJ,CAASS,aAAT,CAAZ;AACA,WAAKT,IAAL,CAAUY,cAAV,GAA2B,KAAKN,GAAL,CAASC,WAAT,GAAuBC,mBAAvB,CAA2CK,cAAtE;AACA,WAAKb,IAAL,CAAUc,WAAV,CAAsB,CAAC,GAAGC,IAAJ,KAAa;AACjC,aAAKT,GAAL,CAASU,QAAT,CAAkB,YAAlB,EAAgCD,KAAK,CAAL,CAAhC;AACD,OAFD;AAGD;AACD,WAAOV,OAAP;AACD;;AAED;;;;;AAKAY,iBAAe;AACb;AACA,SAAKP,OAAL,CAAa,kBAAb,EAAiC,MAAM,KAAvC;AACA,SAAKA,OAAL,CAAa,cAAb,EAA6B,MAAM,KAAnC;AACA,SAAKA,OAAL,CAAa,iBAAb,EAAgC,CAACQ,KAAD,EAAQC,MAAR,KAAmB,KAAKC,WAAL,CAAiBF,KAAjB,EAAwBC,MAAxB,CAAnD;AACA,SAAKT,OAAL,CAAa,iBAAb,EAAgC,CAACQ,KAAD,EAAQC,MAAR,KAAmB,KAAKE,WAAL,CAAiBH,KAAjB,EAAwBC,MAAxB,CAAnD;;AAEA,SAAKT,OAAL,CAAa,WAAb,EAA0B,MAAM,KAAKY,WAAL,EAAhC;AACA,SAAKZ,OAAL,CAAa,aAAb,EAA4B,CAACa,OAAD,EAAUC,MAAV,KAAqB,KAAKC,aAAL,CAAmBF,OAAnB,EAA4BC,MAA5B,CAAjD;AACA,SAAKd,OAAL,CAAa,iBAAb,EAAgC,CAACgB,MAAD,EAASvB,KAAT,KAAmB,KAAKwB,iBAAL,CAAuBD,MAAvB,EAA+BvB,KAA/B,CAAnD;;AAEA,SAAKO,OAAL,CAAa,gBAAb,EAA+B,CAACQ,KAAD,EAAQC,MAAR,EAAgBK,MAAhB,KAA2B,KAAKI,gBAAL,CAAsBV,KAAtB,EAA6BC,MAA7B,EAAqCK,MAArC,CAA1D;AACA,SAAKd,OAAL,CAAa,gBAAb,EAA+B,CAACQ,KAAD,EAAQC,MAAR,EAAgBK,MAAhB,KAA2B,KAAKK,gBAAL,CAAsBX,KAAtB,EAA6BC,MAA7B,EAAqCK,MAArC,CAA1D;AACA,SAAKd,OAAL,CAAa,iBAAb,EAAgC,CAACoB,OAAD,EAAUC,MAAV,KAAqB,KAAKC,iBAAL,CAAuBF,OAAvB,EAAgCC,MAAhC,CAArD;AACA,SAAKrB,OAAL,CAAa,aAAb,EAA6BuB,eAAD,IAAqB,KAAKC,aAAL,CAAmBD,eAAnB,CAAjD;AACA,SAAKvB,OAAL,CAAa,eAAb,EAA8B,CAACyB,IAAD,EAAOJ,MAAP,KAAkB,KAAKK,SAAL,CAAeD,IAAf,EAAqBJ,MAArB,CAAhD;;AAEA;AACA,UAAMd,YAAN;AACD;AACD;;;;;AAKAiB,gBAAcD,eAAd,EAA+B;AAC7B,QAAII,aAAa/B,IAAIgC,SAAJ,CAAc,SAAd,EAAyBC,mBAAzB,CAA6CC,mBAA7C,EAAjB;AACAH,eAAWI,OAAX,CAAmB,CAACC,IAAD,EAAOxB,KAAP,KAAiB;AAClCmB,iBAAWnB,KAAX,EAAkBQ,MAAlB,GAA2B,KAAKzB,UAAL,CAAgBgC,gBAAgBf,KAAhB,EAAuBQ,MAAvC,CAA3B;AACD,KAFD;;AAIA,SAAKxB,OAAL,GAAemC,UAAf;AACA,QAAIM,MAAM,EAAExC,OAAO,KAAKA,KAAd,EAAqBD,SAAS,KAAKA,OAAnC,EAAV;AACA,SAAKF,IAAL,CAAU4C,IAAV,CAAe,OAAf,EAAwBD,GAAxB,EAA6BE,IAA7B,CAAmCC,QAAD,IAAc;AAC9C,WAAKC,SAAL,CAAeD,QAAf;AACD,KAFD;AAGD;;AAED;AACAE,QAAMC,KAAN,EAAaC,IAAb,EAAmBC,EAAnB,EAAuB;AACrB,QAAIA,OAAOD,IAAX,EAAiB;AACf,aAAOD,KAAP;AACD;;AAED,QAAIlB,SAASkB,MAAMC,IAAN,CAAb;AACA,QAAIE,YAAYD,KAAKD,IAAL,GAAY,CAAC,CAAb,GAAiB,CAAjC;;AAEA,SAAK,IAAIG,IAAIH,IAAb,EAAmBG,MAAMF,EAAzB,EAA6BE,KAAKD,SAAlC,EAA6C;AAC3CH,YAAMI,CAAN,IAAWJ,MAAMI,IAAID,SAAV,CAAX;AACD;AACDH,UAAME,EAAN,IAAYpB,MAAZ;AACA,WAAOkB,KAAP;AACD;;AAED;;;;;;AAMAjB,oBAAkBF,OAAlB,EAA2BC,MAA3B,EAAmC;AACjC,QAAIuB,cAAc,EAAlB;AACA,QAAIC,IAAI,CAAR;AACA,SAAKA,IAAI,CAAT,EAAYA,IAAIzB,QAAQ0B,MAAxB,EAAgCD,GAAhC,EAAqC;AACnCD,kBAAYG,IAAZ,CAAiB,KAAKxD,UAAL,CAAgB6B,QAAQyB,CAAR,CAAhB,CAAjB;AACD;;AAED,QAAIG,WAAW;AACbJ,iBADa;AAEbvB;AAFa,KAAf;;AAKA,SAAK/B,IAAL,CAAU4C,IAAV,CAAe,cAAf,EAA+Bc,QAA/B,EACGb,IADH,CACSc,KAAD,IAAW;AACf,WAAK1D,UAAL,GAAkB0D,MAAMC,IAAxB;AACA;AACA;AACD,KALH;AAMD;;AAED;;;;;;;AAOA/B,mBAAiBX,KAAjB,EAAwBC,MAAxB,EAAgCK,MAAhC,EAAwC;AACtC,QAAIqC,UAAU;AACZ3C,WADY;AAEZC,YAFY;AAGZK;AAHY,KAAd;AAKA,QAAIsC,cAAc5C,UAAU,CAAV,GAAc,CAAd,GAAkB,CAApC;AACA,SAAKlB,IAAL,CAAU4C,IAAV,CAAe,gBAAf,EAAiCiB,OAAjC,EACGhB,IADH,CACSc,KAAD,IAAW;AACf,UAAII,WAAW,KAAKzD,GAAL,CAAS0D,OAAT,GAAmBR,MAAlC;AACA,WAAK,IAAIS,MAAM,CAAf,EAAkBA,MAAMF,QAAxB,EAAkCE,KAAlC,EAAyC;AACvC,aAAK3D,GAAL,CAAS4D,WAAT,CAAqBD,GAArB,EAA0B/C,KAA1B,EAAiC,QAAjC,EAA2C,KAAKZ,GAAL,CAAS6D,WAAT,CAAqBF,GAArB,EAA0BH,WAA1B,EAAuCM,MAAlF;AACA,aAAK9D,GAAL,CAAS4D,WAAT,CAAqBD,GAArB,EAA0B/C,KAA1B,EAAiC,QAAjC,EAA2CyC,MAAMU,IAAjD;AACD;AACF,KAPH;AAQD;AACD;;;;;;AAMA,QAAMjD,WAAN,CAAkBF,KAAlB,EAAyBC,MAAzB,EAAiC;AAC/B,QAAImD,aAAa,EAAjB;AACA,SAAK,IAAIf,IAAI,CAAb,EAAgBA,IAAIpC,MAApB,EAA4BoC,GAA5B,EAAiC;AAC/Be,iBAAWb,IAAX,CAAgB,KAAKxD,UAAL,CAAgBsD,IAAIrC,KAApB,CAAhB;AACD;AACD,QAAI;AACF,UAAIyC,QAAQ,MAAM,KAAK3D,IAAL,CAAU4C,IAAV,CAAe,gBAAf,EAAiC0B,UAAjC,CAAlB;AACA,UAAIX,MAAMC,IAAV,EAAgB;AACd,YAAId,WAAW,MAAM,KAAK9C,IAAL,CAAU4C,IAAV,CAAe,OAAf,CAArB;AACA,aAAKG,SAAL,CAAeD,QAAf;AACA,eAAO,IAAP;AACD;AACF,KAPD,CAOE,OAAOyB,GAAP,EAAY;AACZ,aAAO,KAAP;AACD;AACF;;AAED;;;;;;;AAOA3C,mBAAiBV,KAAjB,EAAwBC,MAAxB,EAAgCK,MAAhC,EAAwC;AACtC,QAAIqC,UAAU;AACZ3C,WADY;AAEZC,YAFY;AAGZK;AAHY,KAAd;AAKA,SAAKxB,IAAL,CAAU4C,IAAV,CAAe,aAAf,EAA8BiB,OAA9B,EACGhB,IADH,CACSc,KAAD,IAAW;AACf,UAAIM,MAAM,KAAK3D,GAAL,CAAS0D,OAAT,GAAmB9C,KAAnB,CAAV;AACA,UAAI4C,cAAc5C,UAAU,CAAV,GAAc,CAAd,GAAkB,CAApC;AACA,WAAK,IAAIsD,MAAM,CAAf,EAAkBA,MAAMP,IAAIT,MAA5B,EAAoCgB,KAApC,EAA2C;AACzC,YAAI9C,SAAS,KAAKpB,GAAL,CAAS6D,WAAT,CAAqBL,WAArB,EAAkCU,GAAlC,EAAuCC,MAApD;AACA,aAAKnE,GAAL,CAAS4D,WAAT,CAAqBhD,KAArB,EAA4BsD,GAA5B,EAAiC,QAAjC,EAA2Cb,MAAMe,EAAjD;AACA,aAAKpE,GAAL,CAAS4D,WAAT,CAAqBhD,KAArB,EAA4BsD,GAA5B,EAAiC,QAAjC,EAA2C9C,MAA3C;AACA,aAAKpB,GAAL,CAASqE,aAAT,CAAuBzD,KAAvB,EAA8BsD,GAA9B,EAAmCb,MAAMC,IAAN,CAAWlC,MAAX,CAAnC;AACD;AACF,KAVH;AAWD;;AAED;;;;;;AAMAL,cAAYH,KAAZ,EAAmBC,MAAnB,EAA2B;AACzB,QAAIyD,cAAc,EAAlB;AACA,SAAK,IAAIrB,IAAI,CAAb,EAAgBA,IAAIpC,MAApB,EAA4BoC,GAA5B,EAAiC;AAC/BqB,kBAAYnB,IAAZ,CAAkB,KAAKnD,GAAL,CAAS6D,WAAT,CAAqBZ,IAAIrC,KAAzB,EAAgC,CAAhC,EAAmCkD,MAArD;AACD;AACD,SAAKpE,IAAL,CAAU4C,IAAV,CAAe,aAAf,EAA8BgC,WAA9B,EACG/B,IADH,CACSc,KAAD,IAAW;AACf,UAAI,CAACA,KAAL,EAAY;AACV,eAAO,KAAP;AACD;AACF,KALH;AAMD;;AAED;;;;;;AAMAvB,YAAUD,IAAV,EAAgBJ,MAAhB,EAAwB;AACtB,QAAI8C,YAAY,EAAhB;AACA,SAAK,IAAItB,IAAI,CAAb,EAAgBA,IAAIpB,KAAKqB,MAAzB,EAAiCD,GAAjC,EAAsC;AACpCsB,gBAAUpB,IAAV,CAAe,KAAKnD,GAAL,CAAS6D,WAAT,CAAqBhC,KAAKoB,CAAL,CAArB,EAA8B,CAA9B,EAAiCa,MAAhD;AACD;AACD,QAAIP,UAAU;AACZgB,eADY;AAEZ9C;AAFY,KAAd;AAIA,SAAK/B,IAAL,CAAU4C,IAAV,CAAe,WAAf,EAA4BiB,OAA5B;AACD;;AAED;;;;;;AAMAlC,oBAAkBD,MAAlB,EAA0BvB,KAA1B,EAAiC;AAC/B,SAAKA,KAAL,GAAaA,UAAU2E,SAAV,GAAsB,EAAEpD,QAAQ,KAAKzB,UAAL,CAAgByB,MAAhB,CAAV,EAAmCvB,OAAOA,UAAU,IAAV,GAAiB,KAAjB,GAAyB,MAAnE,EAAtB,GAAoG,EAAjH;;AAEA,QAAIwC,MAAM,EAAExC,OAAO,KAAKA,KAAd,EAAqBD,SAAS,KAAKA,OAAnC,EAAV;AACA,SAAKF,IAAL,CAAU4C,IAAV,CAAe,OAAf,EAAwBD,GAAxB,EACGE,IADH,CACSC,QAAD,IAAc;AAClB,WAAKC,SAAL,CAAeD,QAAf;AACD,KAHH;AAID;;AAED;;;;AAIAC,YAAUD,QAAV,EAAoB;AAClB,QAAIiC,eAAejC,SAASc,IAA5B;AACA,QAAIoB,iBAAiB,EAArB;AACA,SAAK,IAAIf,MAAM,CAAf,EAAkBA,MAAMc,aAAavB,MAArC,EAA6CS,KAA7C,EAAoD;AAClD,UAAIvB,OAAO,EAAX;AACA;AACA,WAAK,IAAIuC,UAAT,IAAuBF,aAAad,GAAb,CAAvB,EAA0C;AACxCvB,aAAKe,IAAL,CAAUsB,aAAad,GAAb,EAAkBgB,UAAlB,CAAV;AACD;AACDD,qBAAevB,IAAf,CAAoBf,IAApB;AACD;;AAED,SAAKpC,GAAL,CAAS4E,QAAT,CAAkBF,cAAlB;;AAEA,QAAI1B,cAAc,EAAlB;;AAEA;AACA,SAAK,IAAI2B,UAAT,IAAuBF,aAAa,CAAb,CAAvB,EAAwC;AACtCzB,kBAAYG,IAAZ,CAAiBwB,UAAjB;AACD;;AAED,SAAKhF,UAAL,GAAkBqD,WAAlB;;AAEA,SAAK,IAAIW,MAAM,CAAf,EAAkBA,MAAMc,aAAavB,MAArC,EAA6CS,KAA7C,EAAoD;AAClD,WAAK,IAAIvC,SAAS,CAAlB,EAAqBA,SAAS4B,YAAYE,MAA1C,EAAkD9B,QAAlD,EAA4D;AAC1D,aAAKpB,GAAL,CAAS4D,WAAT,CAAqBD,GAArB,EAA0BvC,MAA1B,EAAkC,QAAlC,EAA4CqD,aAAad,GAAb,EAAkBnB,SAASqC,KAA3B,CAA5C;AACA,aAAK7E,GAAL,CAAS4D,WAAT,CAAqBD,GAArB,EAA0BvC,MAA1B,EAAkC,QAAlC,EAA4C4B,YAAY5B,MAAZ,CAA5C;AACD;AACF;AACF;;AAED;;;AAGAJ,gBAAc;AACZ,SAAKtB,IAAL,CAAUoF,GAAV,CAAc,WAAd,EACGvC,IADH,CACSC,QAAD,IAAc;AAClB,WAAKxC,GAAL,CAAS+E,cAAT,CAAwBvC,SAASc,IAAjC;AACD,KAHH;AAIA,SAAK5D,IAAL,CAAU4C,IAAV,CAAe,OAAf,EACGC,IADH,CACSC,QAAD,IAAc;AAClB,WAAKC,SAAL,CAAeD,QAAf;AACD,KAHH;AAID;;AAED;;;AAGAwC,kBAAgB;AACd;AACA,UAAMA,aAAN;AACD;;AAED;;;;AAIAC,iBAAe;;AAEb;AACA,SAAKD,aAAL;AACA,SAAKrE,YAAL;;AAEA,UAAMsE,YAAN;AACD;;AAED;;;;;;AAMA9D,gBAAcF,OAAd,EAAuBC,MAAvB,EAA+B;AAC7B,QAAID,OAAJ,EAAa;AACX,UAAIiE,cAAc,EAAlB;AACA,WAAK,IAAIjC,IAAI,CAAb,EAAgBA,IAAIhC,QAAQiC,MAA5B,EAAoCD,GAApC,EAAyC;AACvC,YAAIkC,WAAW,KAAKnF,GAAL,CAAS6D,WAAT,CAAqB5C,QAAQgC,CAAR,EAAW,CAAX,CAArB,EAAoChC,QAAQgC,CAAR,EAAW,CAAX,CAApC,CAAf;AACA,YAAIb,OAAO;AACTuB,eAAKwB,SAASrB,MADL;AAET1C,kBAAQ+D,SAAShB,MAFR;AAGTiB,oBAAUnE,QAAQgC,CAAR,EAAW,CAAX,CAHD;AAIToC,oBAAUpE,QAAQgC,CAAR,EAAW,CAAX,CAJD;AAKTqC,gBAAMH;AALG,SAAX;AAOA,eAAO/C,KAAKkD,IAAL,CAAUC,QAAjB;AACAL,oBAAY/B,IAAZ,CAAiBf,IAAjB;AACD;AACD,WAAK1C,IAAL,CAAU4C,IAAV,CAAe,SAAf,EAA0B;AACxBrB,iBAASiE,WADe;AAExBhE;AAFwB,OAA1B;AAID;AACF;;AAED;;;AAGAsE,YAAU;AACR;AACA,UAAMA,OAAN;AACD;AAtV+D;;AAyVlE,+DAAepG,mBAAf;;AAEA;AACAC,aAAaC,OAAb,CAAqBmG,cAArB,CAAoC,qBAApC,EAA2DrG,mBAA3D,E;;;;;;;;ACrWA;;AAEA;;;;;;AAMe,MAAMsG,IAAN,CAAW;;AAExBlG,cAAYW,aAAZ,EAA2B;AACzB,SAAKA,aAAL,GAAqBA,aAArB;AACA,SAAKwF,SAAL,GAAiB,EAAjB;AACA,SAAKrF,cAAL,GAAsB,EAAtB;AACD;;AAED;;;;;AAKAE,cAAYoF,QAAZ,EAAsB;AACpB,QAAI,OAAOA,QAAP,KAAoB,UAApB,IAAkC,KAAtC,EAA6C;AAC3C,WAAKD,SAAL,CAAexC,IAAf,CAAoByC,QAApB;AACD;AACF;;AAED;;;;;AAKAvF,aAAW,GAAGI,IAAd,EAAoB;AAClB,QAAI,KAAKkF,SAAL,IAAkB,KAAKA,SAAL,CAAezC,MAArC,EAA6C;AAC3C,WAAKyC,SAAL,CAAexD,OAAf,CAAwB0D,QAAD,IAAc;AACnCA,iBAAS,GAAGpF,IAAZ;AACD,OAFD;AAGD;AACF;;AAED;;;;;;AAMA6B,OAAKwD,GAAL,EAAUxC,IAAV,EAAgB;AACd,QAAIyC,UAAU,IAAI,yDAAJ,CAAY,KAAKzF,cAAjB,CAAd;AACAyF,YAAQD,GAAR,GAAc,KAAK3F,aAAL,GAAqB2F,GAAnC;AACAC,YAAQC,MAAR,GAAiB,MAAjB;AACAD,YAAQE,IAAR,GAAeC,KAAKC,SAAL,CAAe7C,IAAf,CAAf;;AAEA,WAAO,KAAKyC,OAAL,CAAaA,OAAb,EAAsBxD,IAAtB,CACJc,KAAD,IAAW;AACT,WAAKhD,UAAL,CAAgB,EAAE0F,OAAF,EAAWvD,UAAU0D,KAAKE,KAAL,CAAW/C,KAAX,CAArB,EAAhB;AACA,aAAO6C,KAAKE,KAAL,CAAW/C,KAAX,CAAP;AACD,KAJI,CAAP;AAMD;;AAED;;;;;AAKAyB,MAAIgB,GAAJ,EAAS;AACP,QAAIC,UAAU,IAAI,yDAAJ,CAAY,KAAKzF,cAAjB,CAAd;AACAyF,YAAQD,GAAR,GAAc,KAAK3F,aAAL,GAAqB2F,GAAnC;;AAEA,WAAO,KAAKC,OAAL,CAAaA,OAAb,EAAsBxD,IAAtB,CACJc,KAAD,IAAW;AACT,WAAKhD,UAAL,CAAgB,EAAE0F,OAAF,EAAWvD,UAAU0D,KAAKE,KAAL,CAAW/C,KAAX,CAArB,EAAhB;AACA,aAAO6C,KAAKE,KAAL,CAAW/C,KAAX,CAAP;AACD,KAJI,CAAP;AAMD;;AAED;;;;AAIA0C,UAAQM,GAAR,EAAa;AACX,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,UAAIC,MAAM,IAAIC,cAAJ,EAAV;AACAD,UAAIE,IAAJ,CAASN,IAAIL,MAAJ,IAAc,KAAvB,EAA8BK,IAAIP,GAAlC;AACA,UAAIO,IAAIO,OAAR,EAAiB;AACfC,eAAOC,IAAP,CAAYT,IAAIO,OAAhB,EAAyBzE,OAAzB,CAAkC4E,GAAD,IAAS;AACxCN,cAAIO,gBAAJ,CAAqBD,GAArB,EAA0BV,IAAIO,OAAJ,CAAYG,GAAZ,CAA1B;AACD,SAFD;AAGD;AACDN,UAAIQ,MAAJ,GAAa,MAAM;AACjB,YAAIR,IAAIS,MAAJ,IAAc,GAAd,IAAqBT,IAAIS,MAAJ,GAAa,GAAtC,EAA2C;AACzCX,kBAAQE,IAAIjE,QAAZ;AACD,SAFD,MAEO;AACLgE,iBAAOC,IAAIU,UAAX;AACD;AACF,OAND;AAOAV,UAAIW,OAAJ,GAAc,MAAMZ,OAAOC,IAAIU,UAAX,CAApB;AACAV,UAAIY,IAAJ,CAAShB,IAAIJ,IAAb;AACD,KAjBM,CAAP;AAkBD;AA5FuB,C;;;;;;;;;ACR1B;;;AAGe,MAAMqB,OAAN,CAAc;AAC3B9H,cAAYoH,OAAZ,EAAqB;AACnB,SAAKd,GAAL,GAAW,EAAX;AACA,SAAKE,MAAL,GAAc,KAAd;AACA,SAAKY,OAAL,GAAeA,YAAYpC,SAAZ,GAAwBoC,OAAxB,GAAkC,EAAE,gBAAgB,kBAAlB,EAAjD;AACA,SAAKX,IAAL,GAAY,EAAZ;AACD;AAN0B,C","file":"datasource-connector.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"DatasourceConector\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DatasourceConector\"] = factory();\n\telse\n\t\troot[\"DatasourceConector\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d06e2dccedc85e196eca","import Http from './utils/http';\r\n\r\n/**\r\n * @plugin DataSourceConnector\r\n * Note: keep in mind, that Handsontable instance creates one instance of the plugin class.\r\n *\r\n * @description\r\n * This plugin enable the backend side data management for handsontable instance\r\n */\r\nclass DataSourceConnector extends Handsontable.plugins.BasePlugin {\r\n\r\n  // The argument passed to the constructor is the currently processed Handsontable instance object.\r\n  constructor(hotInstance) {\r\n    super(hotInstance);\r\n    this.http = {};\r\n    this.colHeaders = [];\r\n    this.filters = [];\r\n    this.order = {};\r\n  }\r\n\r\n  /**\r\n   * Checks if the plugin is enabled in the settings.\r\n   */\r\n  isEnabled() {\r\n    let enabled = !!this.hot.getSettings().dataSourceConnector;\r\n    if (enabled) {\r\n      let controllerUrl = this.hot.getSettings().dataSourceConnector.controllerUrl;\r\n      this.hot.addHook('onDataSend', this.hot.getSettings().dataSourceConnector.onDataSend);\r\n      this.http = new Http(controllerUrl);\r\n      this.http.defaultHeaders = this.hot.getSettings().dataSourceConnector.requestHeaders;\r\n      this.http.addListener((...args) => {\r\n        this.hot.runHooks('onDataSend', args[0]);\r\n      });\r\n    }\r\n    return enabled;\r\n  }\r\n\r\n  /**\r\n   * The enablePlugin method is triggered on the beforeInit hook. It should contain your initial plugin setup, along with\r\n   * the hook connections.\r\n   * Note, that this method is run only if the statement in the isEnabled method is true.\r\n   */\r\n  enablePlugin() {\r\n    // disable build in sort and filter functions\r\n    this.addHook('beforeColumnSort', () => false);\r\n    this.addHook('beforeFilter', () => false);\r\n    this.addHook('beforeRemoveCol', (index, amount) => this.onRemoveCol(index, amount));\r\n    this.addHook('beforeRemoveRow', (index, amount) => this.onRemoveRow(index, amount));\r\n\r\n    this.addHook('afterInit', () => this.onAfterInit());\r\n    this.addHook('afterChange', (changes, source) => this.onAfterChange(changes, source));\r\n    this.addHook('afterColumnSort', (column, order) => this.onAfterColumnSort(column, order));\r\n\r\n    this.addHook('afterCreateRow', (index, amount, source) => this.onAfterCreateRow(index, amount, source));\r\n    this.addHook('afterCreateCol', (index, amount, source) => this.onAfterCreateCol(index, amount, source));\r\n    this.addHook('afterColumnMove', (columns, target) => this.onAfterColumnMove(columns, target));\r\n    this.addHook('afterFilter', (conditionsStack) => this.onAfterFilter(conditionsStack));\r\n    this.addHook('beforeRowMove', (rows, target) => this.onRowMove(rows, target));\r\n\r\n    // The super method assigns the this.enabled property to true, which can be later used to check if plugin is already enabled.\r\n    super.enablePlugin();\r\n  }\r\n  /**\r\n   * The onAfterFilter method is called after filtering.\r\n   *\r\n   * @param {array} conditionsStack\r\n   */\r\n  onAfterFilter(conditionsStack) {\r\n    var conditions = hot.getPlugin('filters').conditionCollection.exportAllConditions();\r\n    conditions.forEach((item, index) => {\r\n      conditions[index].column = this.colHeaders[conditionsStack[index].column];\r\n    });\r\n\r\n    this.filters = conditions;\r\n    let uri = { order: this.order, filters: this.filters};\r\n    this.http.post('/data', uri).then((response) => {\r\n      this._loadData(response);\r\n    });\r\n  }\r\n\r\n  // move element in array from position to target\r\n  _move(array, from, to) {\r\n    if (to === from) {\r\n      return array;\r\n    }\r\n\r\n    var target = array[from];\r\n    var increment = to < from ? -1 : 1;\r\n\r\n    for (var k = from; k !== to; k += increment) {\r\n      array[k] = array[k + increment];\r\n    }\r\n    array[to] = target;\r\n    return array;\r\n  }\r\n\r\n  /**\r\n   * The onAfterColumnMove method is called after moving column.\r\n   *\r\n   * @param {array} columns\r\n   * @param {number} target\r\n   */\r\n  onAfterColumnMove(columns, target) {\r\n    var columnNames = [];\r\n    var i = 0;\r\n    for (i = 0; i < columns.length; i++) {\r\n      columnNames.push(this.colHeaders[columns[i]]);\r\n    }\r\n\r\n    var colMoved = {\r\n      columnNames,\r\n      target\r\n    };\r\n\r\n    this.http.post('/move/column', colMoved)\r\n      .then((value) => {\r\n        this.colHeaders = value.data;\r\n        // hot.updateSettings({colHeaders: value.data});\r\n        // console.log(hot.getSettings());\r\n      });\r\n  }\r\n\r\n  /**\r\n   * The onAfterCreateCol method is called after creating new column.\r\n   *\r\n   * @param {number} index\r\n   * @param {number} amount\r\n   * @param {string} source\r\n   */\r\n  onAfterCreateCol(index, amount, source) {\r\n    var payload = {\r\n      index,\r\n      amount,\r\n      source\r\n    };\r\n    var sourceIndex = index === 0 ? 1 : 0;\r\n    this.http.post('/create/column', payload)\r\n      .then((value) => {\r\n        var noOfRows = this.hot.getData().length;\r\n        for (var row = 0; row < noOfRows; row++) {\r\n          this.hot.setCellMeta(row, index, 'row_id', this.hot.getCellMeta(row, sourceIndex).row_id);\r\n          this.hot.setCellMeta(row, index, 'col_id', value.name);\r\n        }\r\n      });\r\n  }\r\n  /**\r\n   * The onAfterRemoveCol method is called after removing column.\r\n   *\r\n   * @param {number} index\r\n   * @param {number} amount\r\n   * */\r\n  async onRemoveCol(index, amount) {\r\n    var removedCol = [];\r\n    for (var i = 0; i < amount; i++) {\r\n      removedCol.push(this.colHeaders[i + index]);\r\n    }\r\n    try {\r\n      var value = await this.http.post('/remove/column', removedCol);\r\n      if (value.data) {\r\n        var response = await this.http.post('/data');\r\n        this._loadData(response);\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method called after creating new row.\r\n   *\r\n   * @param {number} index\r\n   * @param {number} amount\r\n   * @param {string} source\r\n   */\r\n  onAfterCreateRow(index, amount, source) {\r\n    var payload = {\r\n      index,\r\n      amount,\r\n      source\r\n    };\r\n    this.http.post('/create/row', payload)\r\n      .then((value) => {\r\n        var row = this.hot.getData()[index];\r\n        var sourceIndex = index === 1 ? 2 : 1;\r\n        for (var col = 0; col < row.length; col++) {\r\n          var column = this.hot.getCellMeta(sourceIndex, col).col_id;\r\n          this.hot.setCellMeta(index, col, 'row_id', value.id);\r\n          this.hot.setCellMeta(index, col, 'col_id', column);\r\n          this.hot.setDataAtCell(index, col, value.data[column]);\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Method called after creating new row.\r\n   *\r\n   * @param {number} index\r\n   * @param {number} amount\r\n   */\r\n  onRemoveRow(index, amount) {\r\n    var rowsRemoved = [];\r\n    for (var i = 0; i < amount; i++) {\r\n      rowsRemoved.push((this.hot.getCellMeta(i + index, 1).row_id));\r\n    }\r\n    this.http.post('/remove/row', rowsRemoved)\r\n      .then((value) => {\r\n        if (!value) {\r\n          return false;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n  * Method called after moving row.\r\n  *\r\n  * @param {array} rows\r\n  * @param {number} target\r\n  */\r\n  onRowMove(rows, target) {\r\n    var rowsMoved = [];\r\n    for (var i = 0; i < rows.length; i++) {\r\n      rowsMoved.push(this.hot.getCellMeta(rows[i], 1).row_id);\r\n    };\r\n    var payload = {\r\n      rowsMoved,\r\n      target\r\n    };\r\n    this.http.post('/move/row', payload);\r\n  }\r\n\r\n  /**\r\n   * Method called after sorting column, event will be passed to backend.\r\n   *\r\n   * @param {number} column\r\n   * @param {boolean} order\r\n   */\r\n  onAfterColumnSort(column, order) {\r\n    this.order = order !== undefined ? { column: this.colHeaders[column], order: order === true ? 'ASC' : 'DESC' } : {};\r\n\r\n    let uri = { order: this.order, filters: this.filters};\r\n    this.http.post('/data', uri)\r\n      .then((response) => {\r\n        this._loadData(response);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Load data and setup all dedicated metadata for backend sync\r\n   * @param {object} response\r\n   */\r\n  _loadData(response) {\r\n    let responseData = response.data;\r\n    let normalizedData = [];\r\n    for (let row = 0; row < responseData.length; row++) {\r\n      let item = [];\r\n      // eslint-disable-next-line guard-for-in\r\n      for (let columnName in responseData[row]) {\r\n        item.push(responseData[row][columnName]);\r\n      }\r\n      normalizedData.push(item);\r\n    }\r\n\r\n    this.hot.loadData(normalizedData);\r\n\r\n    let columnNames = [];\r\n\r\n    // eslint-disable-next-line guard-for-in\r\n    for (let columnName in responseData[0]) {\r\n      columnNames.push(columnName);\r\n    }\r\n\r\n    this.colHeaders = columnNames;\r\n\r\n    for (let row = 0; row < responseData.length; row++) {\r\n      for (let column = 0; column < columnNames.length; column++) {\r\n        this.hot.setCellMeta(row, column, 'row_id', responseData[row][response.rowId]);\r\n        this.hot.setCellMeta(row, column, 'col_id', columnNames[column]);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method called after Handsontable instance initiation\r\n   */\r\n  onAfterInit() {\r\n    this.http.get('/settings')\r\n      .then((response) => {\r\n        this.hot.updateSettings(response.data);\r\n      });\r\n    this.http.post('/data')\r\n      .then((response) => {\r\n        this._loadData(response);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * The disablePlugin method is used to disable the plugin. Reset all of your classes properties to their default values here.\r\n   */\r\n  disablePlugin() {\r\n    // The super method takes care of clearing the hook connections and assigning the 'false' value to the 'this.enabled' property.\r\n    super.disablePlugin();\r\n  }\r\n\r\n  /**\r\n   * The updatePlugin method is called on the afterUpdateSettings hook (unless the updateSettings method turned the plugin off).\r\n   * It should contain all the stuff your plugin needs to do to work properly after the Handsontable instance settings were modified.\r\n   */\r\n  updatePlugin() {\r\n\r\n    // The updatePlugin method needs to contain all the code needed to properly re-enable the plugin. In most cases simply disabling and enabling the plugin should do the trick.\r\n    this.disablePlugin();\r\n    this.enablePlugin();\r\n\r\n    super.updatePlugin();\r\n  }\r\n\r\n  /**\r\n   * The afterChange hook callback.\r\n   *\r\n   * @param {Array} changes Array of changes.\r\n   * @param {String} source Describes the source of the change.\r\n   */\r\n  onAfterChange(changes, source) {\r\n    if (changes) {\r\n      let changeItems = [];\r\n      for (let i = 0; i < changes.length; i++) {\r\n        let cellMeta = this.hot.getCellMeta(changes[i][0], changes[i][1]);\r\n        let item = {\r\n          row: cellMeta.row_id,\r\n          column: cellMeta.col_id,\r\n          oldValue: changes[i][2],\r\n          newValue: changes[i][3],\r\n          meta: cellMeta\r\n        };\r\n        delete item.meta.instance;\r\n        changeItems.push(item);\r\n      }\r\n      this.http.post('/update', {\r\n        changes: changeItems,\r\n        source\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The destroy method should de-assign all of your properties.\r\n   */\r\n  destroy() {\r\n    // The super method takes care of de-assigning the event callbacks, plugin hooks and clearing all the plugin properties.\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default DataSourceConnector;\r\n\r\n// register plugin\r\nHandsontable.plugins.registerPlugin('DataSourceConnector', DataSourceConnector);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Request from './request';\r\n\r\n/**\r\n * Send the xhr request to server\r\n *\r\n * @param {Request} obj Request object\r\n * @returns {Promise}\r\n */\r\nexport default class Http {\r\n\r\n  constructor(controllerUrl) {\r\n    this.controllerUrl = controllerUrl;\r\n    this.listeners = [];\r\n    this.defaultHeaders = {};\r\n  }\r\n\r\n  /**\r\n     * make a callback function that listen for HTTP events\r\n     *\r\n     * @param {function} callback\r\n     */\r\n  addListener(callback) {\r\n    if (typeof callback === 'function' || false) {\r\n      this.listeners.push(callback);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * this method emit the onDataSend event to listeners\r\n     *\r\n     * @param {any} args\r\n     */\r\n  onDataSend(...args) {\r\n    if (this.listeners && this.listeners.length) {\r\n      this.listeners.forEach((listener) => {\r\n        listener(...args);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n     * make HTTP POST to url with payload data\r\n     *\r\n     * @param {string} url\r\n     * @param {any} data\r\n     */\r\n  post(url, data) {\r\n    var request = new Request(this.defaultHeaders);\r\n    request.url = this.controllerUrl + url;\r\n    request.method = 'POST';\r\n    request.body = JSON.stringify(data);\r\n\r\n    return this.request(request).then(\r\n      (value) => {\r\n        this.onDataSend({ request, response: JSON.parse(value) });\r\n        return JSON.parse(value);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n     * make HTTP GET call on url\r\n     *\r\n     * @param {string} url\r\n     */\r\n  get(url) {\r\n    var request = new Request(this.defaultHeaders);\r\n    request.url = this.controllerUrl + url;\r\n\r\n    return this.request(request).then(\r\n      (value) => {\r\n        this.onDataSend({ request, response: JSON.parse(value) });\r\n        return JSON.parse(value);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n    *\r\n    * @param {object} obj\r\n    */\r\n  request(obj) {\r\n    return new Promise((resolve, reject) => {\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.open(obj.method || 'GET', obj.url);\r\n      if (obj.headers) {\r\n        Object.keys(obj.headers).forEach((key) => {\r\n          xhr.setRequestHeader(key, obj.headers[key]);\r\n        });\r\n      }\r\n      xhr.onload = () => {\r\n        if (xhr.status >= 200 && xhr.status < 300) {\r\n          resolve(xhr.response);\r\n        } else {\r\n          reject(xhr.statusText);\r\n        }\r\n      };\r\n      xhr.onerror = () => reject(xhr.statusText);\r\n      xhr.send(obj.body);\r\n    });\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/http.js","/**\r\n * This class represents the http request call in xhr context\r\n */\r\nexport default class Request {\r\n  constructor(headers) {\r\n    this.url = '';\r\n    this.method = 'GET';\r\n    this.headers = headers !== undefined ? headers : { 'Content-Type': 'application/json' };\r\n    this.body = '';\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request.js"],"sourceRoot":""}